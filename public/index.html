<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gaslighting trong tình bạn</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Title animation */
    .title {
      color: #b91c1c; /* đỏ đậm */
      font-weight: 800;
      font-size: 2.25rem;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 1s ease forwards;
      animation-delay: 0.2s;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); }}
    .card-shadow { box-shadow: 0 8px 20px rgba(2,6,23,0.08); transition: transform 0.2s; }
    .card-shadow:hover { transform: translateY(-2px); }
    /* simple chat bubble */
    .bubble { background: linear-gradient(135deg, #f7fce6, #eef2ff); border-radius: 16px; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
  
  <div class="max-w-5xl mx-auto p-6">
    <header class="mb-10 text-center">
      <h1 class="title">Thao túng tâm lý trong tình bạn (Gaslighting)</h1>
      <p class="mt-2 text-gray-600">Trang thông tin, nhận diện và phòng tránh gaslighting giữa bạn bè.</p>
    </header>

    <main class="space-y-10">
      
      <div class="w-full flex justify-center shadow-lg rounded-xl overflow-hidden">
        <img src="https://images.unsplash.com/photo-1573497620053-ea5300f94f21?w=1200&q=80&auto=format&fit=crop" alt="Gaslighting Banner" class="w-full object-cover h-64 md:h-80" />
      </div>

      <section id="dinh-nghia" class="bg-[#fff7ed] p-8 rounded-2xl card-shadow border border-orange-100">
        <h2 class="text-2xl font-bold mb-6 text-orange-800 border-b pb-2 border-orange-200">Định nghĩa</h2>
        
        <div class="grid md:grid-cols-2 gap-8 items-start">
          <div class="space-y-4">
            <div class="bg-white p-4 rounded-lg shadow-sm">
              <h3 class="font-bold text-lg text-red-600 mb-2">Gaslighting là gì?</h3>
              <p class="text-sm leading-relaxed">Là một dạng thao túng tâm lý, trong đó người thao túng khiến bạn nghi ngờ cảm nhận, ký ức hoặc lý trí của chính mình. Mục tiêu là kiểm soát và làm yếu thế đối phương bằng cách phủ nhận và bóp méo sự thật.</p>
            </div>
            <img src="https://images.unsplash.com/photo-1616165574697-3f938d227b91?w=600&q=80&auto=format&fit=crop" alt="Người nói dồn ép" class="w-full h-48 object-cover rounded-lg shadow-md" />
          </div>

          <div class="space-y-4">
            <div class="bg-white p-4 rounded-lg shadow-sm">
              <h3 class="font-bold text-lg text-blue-600 mb-2">Self-gaslighting là gì?</h3>
              <p class="text-sm leading-relaxed">Xảy ra khi chính nạn nhân bắt đầu nghi ngờ cảm xúc và trực giác của mình, tự biện minh cho hành vi gây tổn hại của người khác, hoặc thường xuyên tự trách mình một cách không công bằng.</p>
            </div>
            <img src="https://images.unsplash.com/photo-1620302066861-5369622d152c?w=600&q=80&auto=format&fit=crop" alt="Tự nghi ngờ" class="w-full h-48 object-cover rounded-lg shadow-md" />
          </div>
        </div>
      </section>

      <section id="bieu-hien" class="bg-white p-6 rounded-2xl card-shadow">
        <h2 class="text-xl font-bold mb-4 text-gray-800">Biểu hiện của Gaslighting</h2>
        <ul class="list-disc pl-5 space-y-2 text-gray-700 marker:text-red-500">
          <li><strong>Phủ nhận thực tế:</strong> "Tao chưa bao giờ nói thế, mày bị ảo à?"</li>
          <li><strong>Bóp méo sự thật:</strong> Kể lại sự việc theo cách khiến bạn nghi ngờ trí nhớ của mình.</li>
          <li><strong>Vừa đấm vừa xoa:</strong> Dùng lời khen giả để kiểm soát, rồi phê bình nặng nề sau đó.</li>
          <li><strong>Cô lập:</strong> "Mọi người đều thấy mày lạ lùng, chỉ có tao mới chơi với mày thôi."</li>
          <li><strong>Đóng vai nạn nhân:</strong> Ép bạn nhận lỗi, xin lỗi mặc dù bạn không làm gì sai.</li>
        </ul>
        
        <div class="mt-6 grid grid-cols-2 md:grid-cols-5 gap-3">
          <img src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=300&q=60&fit=crop" class="rounded-lg h-24 w-full object-cover" />
          <img src="https://images.unsplash.com/photo-1517486808906-6ca8b3f04846?w=300&q=60&fit=crop" class="rounded-lg h-24 w-full object-cover" />
          <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=300&q=60&fit=crop" class="rounded-lg h-24 w-full object-cover" />
          <img src="https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=300&q=60&fit=crop" class="rounded-lg h-24 w-full object-cover" />
          <img src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=300&q=60&fit=crop" class="rounded-lg h-24 w-full object-cover" />
        </div>
      </section>

      <div class="grid md:grid-cols-2 gap-6">
        <section class="bg-red-50 p-6 rounded-2xl card-shadow border border-red-100">
          <h2 class="text-xl font-bold mb-3 text-red-800">Tác động tiêu cực</h2>
          <p class="text-sm text-gray-700 leading-relaxed">
            Mất tự tin, lo âu, trầm cảm, giảm hiệu suất học tập. Nạn nhân thường cảm thấy mình "điên rồ", không đáng tin cậy và ngày càng phụ thuộc vào người thao túng.
          </p>
        </section>
        
        <section class="bg-green-50 p-6 rounded-2xl card-shadow border border-green-100">
          <h2 class="text-xl font-bold mb-3 text-green-800">Cách phòng tránh</h2>
          <ol class="list-decimal pl-5 space-y-2 text-sm text-gray-700">
            <li><strong>Ghi chép:</strong> Lưu tin nhắn, viết nhật ký để có bằng chứng đối chiếu.</li>
            <li><strong>Giữ ranh giới:</strong> Học cách nói "không" và rời đi khi thấy không ổn.</li>
            <li><strong>Tìm đồng minh:</strong> Chia sẻ với người khác để có góc nhìn khách quan.</li>
            <li><strong>Tin vào trực giác:</strong> Nếu thấy sai sai, có lẽ là sai thật.</li>
          </ol>
        </section>
      </div>

      <section id="phan-biet" class="bg-white p-6 rounded-2xl card-shadow overflow-hidden">
        <h2 class="text-xl font-bold mb-4">Phân biệt Gaslighting và Self-gaslighting</h2>
        <div class="overflow-x-auto">
          <table class="w-full text-left text-sm">
            <thead class="bg-gray-100 text-gray-700 uppercase font-semibold">
              <tr>
                <th class="p-3 w-1/2">Gaslighting (Từ bên ngoài)</th>
                <th class="p-3 w-1/2">Self-gaslighting (Từ bên trong)</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
              <tr>
                <td class="p-3">Hành vi được thực hiện bởi người khác để kiểm soát.</td>
                <td class="p-3">Bạn tự nghi ngờ chính mình, tự biện minh cho kẻ xấu.</td>
              </tr>
              <tr>
                <td class="p-3">Có ý đồ thao túng hoặc tìm lợi ích cá nhân.</td>
                <td class="p-3">Là hệ quả tâm lý sau khi bị thao túng lâu dài.</td>
              </tr>
              <tr>
                <td class="p-3 text-red-600">"Mày quá nhạy cảm rồi đấy."</td>
                <td class="p-3 text-blue-600">"Chắc là do mình nhạy cảm quá thôi."</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="checklist" class="bg-indigo-50 p-6 rounded-2xl card-shadow border border-indigo-100">
        <h2 class="text-xl font-bold mb-4 text-indigo-900">Quiz: Bạn có đang bị Gaslighting?</h2>
        <p class="text-sm mb-4 text-indigo-700">Trả lời Có hoặc Không cho các câu hỏi dưới đây:</p>
        
        <form id="checklistForm" class="space-y-4 text-sm bg-white p-5 rounded-xl shadow-sm">
          <fieldset>
            <legend class="font-medium text-gray-900 mb-1">1. Bạn có thường xuyên bị ai đó phủ nhận ký ức về một sự kiện đã xảy ra (họ nói "Tao chưa từng hứa thế")?</legend>
            <div class="flex gap-4">
              <label class="cursor-pointer"><input type="radio" name="q1" value="yes" class="mr-1"> Có</label>
              <label class="cursor-pointer"><input type="radio" name="q1" value="no" class="mr-1"> Không</label>
            </div>
          </fieldset>

          <fieldset>
            <legend class="font-medium text-gray-900 mb-1">2. Bạn có liên tục bị gọi là "quá nhạy cảm" hoặc "hay tưởng tượng" khi bạn buồn phiền không?</legend>
            <div class="flex gap-4">
              <label class="cursor-pointer"><input type="radio" name="q2" value="yes" class="mr-1"> Có</label>
              <label class="cursor-pointer"><input type="radio" name="q2" value="no" class="mr-1"> Không</label>
            </div>
          </fieldset>

           <fieldset>
            <legend class="font-medium text-gray-900 mb-1">3. Bạn có thường xuyên phải xin lỗi dù bạn cảm thấy mình không làm gì sai?</legend>
            <div class="flex gap-4">
              <label class="cursor-pointer"><input type="radio" name="q3" value="yes" class="mr-1"> Có</label>
              <label class="cursor-pointer"><input type="radio" name="q3" value="no" class="mr-1"> Không</label>
            </div>
          </fieldset>
          
           <fieldset>
            <legend class="font-medium text-gray-900 mb-1">4. Bạn có cảm thấy mình "không đủ tốt" hoặc kém cỏi hơn so với trước khi chơi với người này?</legend>
            <div class="flex gap-4">
              <label class="cursor-pointer"><input type="radio" name="q4" value="yes" class="mr-1"> Có</label>
              <label class="cursor-pointer"><input type="radio" name="q4" value="no" class="mr-1"> Không</label>
            </div>
          </fieldset>

          <div class="pt-4 border-t flex items-center gap-3">
            <button type="button" id="checklistSubmit" class="px-5 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-medium transition">Xem kết quả</button>
            <button type="button" id="checklistClear" class="px-4 py-2 rounded-lg border hover:bg-gray-50 text-gray-600">Làm lại</button>
          </div>

          <div id="checklistResult" class="mt-4 p-4 rounded-lg hidden"></div>
        </form>
      </section>

      <section id="video" class="bg-black text-white p-6 rounded-2xl card-shadow">
        <h2 class="text-xl font-bold mb-3">Video minh hoạ</h2>
        <p class="text-sm text-gray-400 mb-4">Một tình huống điển hình về thao túng tâm lý.</p>
        <video controls class="w-full rounded-lg bg-gray-900 aspect-video">
            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4" type="video/mp4" />
            Trình duyệt của bạn không hỗ trợ video.
        </video>
      </section>

      <section id="tam-su" class="bg-white p-6 rounded-2xl card-shadow border-t-4 border-blue-500">
        <h2 class="text-xl font-bold mb-3">Tâm sự & Chia sẻ</h2>
        <p class="text-sm text-gray-600 mb-6">Không gian an toàn để bạn chia sẻ câu chuyện của mình. Tin nhắn sẽ được gửi đến email quản trị viên.</p>

        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <label class="block text-sm font-medium text-gray-700">Tên của bạn (hoặc biệt danh)</label>
            <input id="name" class="mt-1 block w-full rounded-md border border-gray-300 shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Người ẩn danh" />

            <label class="block text-sm font-medium mt-4 text-gray-700">Câu chuyện của bạn</label>
            <textarea id="message" rows="5" class="mt-1 block w-full rounded-md border border-gray-300 shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Mình có một người bạn..."></textarea>
            
            <input id="recipient" type="hidden" value="admin@example.com" /> 

            <div class="flex items-center gap-3 mt-6">
              <button id="sendBtn" class="px-6 py-2.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium shadow-md transition">Gửi tâm sự</button>
              <button id="clearBtn" class="px-4 py-2.5 rounded-lg border hover:bg-gray-50 text-gray-600">Xóa</button>
            </div>
            <p id="sendNote" class="mt-2 text-xs text-gray-400 italic">Tin nhắn sẽ mở ứng dụng email của bạn nếu hệ thống gửi tự động chưa được cấu hình.</p>
          </div>

          <div class="flex flex-col h-full">
            <label class="block text-sm font-medium text-gray-700 mb-1">Xem trước tin nhắn</label>
            <div class="flex-1 p-4 bubble shadow-inner border border-gray-100" id="chatPreview">
              <div id="previewContent" class="space-y-3 text-sm text-gray-800">
                <p class="text-gray-400 italic">Nội dung sẽ hiện ở đây...</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="text-center text-xs text-gray-400 py-8 border-t mt-8">
        &copy; 2025 Dự án Nhận Diện Gaslighting. Vì một tình bạn lành mạnh.
      </footer>
    </main>
  </div>

  <script>
    // --- 1. Xử lý phần Xem trước (Preview) ---
    const nameInput = document.getElementById('name');
    const msgInput = document.getElementById('message');
    const preview = document.getElementById('previewContent');
    const clearBtn = document.getElementById('clearBtn');
    const sendBtn = document.getElementById('sendBtn');

    function updatePreview(){
      const name = nameInput.value.trim() || 'Người ẩn danh';
      const msg = msgInput.value.trim() || '<span class="text-gray-400 italic">Chưa có nội dung...</span>';
      const time = new Date().toLocaleTimeString('vi-VN', {hour: '2-digit', minute:'2-digit'});
      
      preview.innerHTML = `
        <div class="bg-white p-3 rounded-tr-xl rounded-bl-xl rounded-br-xl shadow-sm inline-block max-w-full">
          <div class="text-xs font-bold text-blue-600 mb-1">${name} <span class="text-gray-300 font-normal"> • ${time}</span></div>
          <div class="text-gray-800 leading-relaxed">${msg.replace(/\n/g,'<br>')}</div>
        </div>
      `;
    }

    nameInput.addEventListener('input', updatePreview);
    msgInput.addEventListener('input', updatePreview);

    clearBtn.addEventListener('click', ()=>{
      nameInput.value = ''; 
      msgInput.value = ''; 
      updatePreview();
    });

    // --- 2. Xử lý Gửi (EmailJS hoặc Mailto fallback) ---
    sendBtn.addEventListener('click', async ()=>{
      const name = nameInput.value.trim() || 'Người ẩn danh';
      const message = msgInput.value.trim();
      const recipient = 'admin@example.com'; // Email người nhận mặc định

      if(!message){ alert('Bạn ơi, hãy viết gì đó trước khi gửi nhé!'); return; }

      // Thử dùng EmailJS nếu đã cấu hình (Cần thay YOUR_SERVICE_ID...)
      // Do đây là code demo, nó sẽ nhảy xuống fallback mailto
      try{
        if(window.emailjs && 'YOUR_SERVICE_ID' !== 'YOUR_SERVICE_ID'){
           // Code gửi EmailJS ở đây (giữ nguyên logic của bạn)
        }
      } catch(e){}

      // Fallback: Mở trình gửi mail mặc định
      const subject = encodeURIComponent(`Tâm sự từ ${name}: Về Gaslighting`);
      const body = encodeURIComponent(`Tên: ${name}\n\nNội dung:\n${message}`);
      window.location.href = `mailto:${recipient}?subject=${subject}&body=${body}`;
    });

    // --- 3. Xử lý Checklist (Đã sửa lỗi cú pháp) ---
    const checklistSubmit = document.getElementById('checklistSubmit');
    const checklistClear = document.getElementById('checklistClear');
    const checklistResult = document.getElementById('checklistResult');
    const form = document.getElementById('checklistForm');

    if(checklistSubmit){
      checklistSubmit.addEventListener('click', ()=>{
        const data = new FormData(form);
        let yesCount = 0;
        // Kiểm tra 4 câu hỏi (q1 đến q4)
        for(let i=1; i<=4; i++){ 
          if(data.get('q'+i) === 'yes') yesCount++; 
        }

        // Hiện kết quả
        checklistResult.classList.remove('hidden');
        if (yesCount === 0) {
            checklistResult.className = "mt-4 p-4 rounded-lg bg-green-100 text-green-800 border border-green-200";
            checklistResult.innerHTML = `<strong>Tuyệt vời!</strong><br>Có vẻ mối quan hệ của bạn khá lành mạnh.`;
        } else if (yesCount <= 2) {
             checklistResult.className = "mt-4 p-4 rounded-lg bg-yellow-100 text-yellow-800 border border-yellow-200";
             checklistResult.innerHTML = `<strong>Hãy cẩn thận.</strong><br>Bạn có ${yesCount} dấu hiệu đáng lo ngại. Hãy quan sát thêm nhé.`;
        } else {
             checklistResult.className = "mt-4 p-4 rounded-lg bg-red-100 text-red-800 border border-red-200";
             checklistResult.innerHTML = `<strong>Cảnh báo đỏ! (${yesCount}/4 dấu hiệu)</strong><br>Có khả năng cao bạn đang bị thao túng. Hãy tìm kiếm sự hỗ trợ từ người tin cậy ngay.`;
        }
      });
    }

    if(checklistClear){
      checklistClear.addEventListener('click', ()=>{
        form.reset();
        checklistResult.classList.add('hidden');
        checklistResult.textContent = '';
      });
    }

    // Khởi tạo preview ban đầu
    updatePreview();
  </script>
</body>
</html>
